version: 2.1
orbs:
  gh: circleci/github-cli@2.6
jobs:
  build:
    machine:
      image: ubuntu-2404:2024.11.1
    steps:
      - checkout
      - gh/install
      - run:
          name: Install CLI Tool
          command: gh release download --repo "levibostian/new-deployment-tool" --pattern "bin-$(uname -m)-$(uname)" --output new-deployment-tool
      - run:
          name: Run CLI Tool
          command: |
            ./new-deployment-tool \
              --github_token "" \
              --git_config "github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>" \
              --deploy "" \
              --get_latest_release_current_branch "" \
              --get_next_release_version "" \
              --simulated_merge_type "merge" \
              --output_file "" \
              --make_pull_request_comment "true" \
              --fail_on_deploy_verification "true"
workflows:
  version: 2
  build_and_deploy:
    jobs:
      - build
